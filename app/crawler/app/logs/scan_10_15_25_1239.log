ðŸ§ª Running cucumber + unit tests...
USING RUNNER: behave.runner:Runner
Feature: Website Scan # tests/features/steps/tests/features/site_scan.feature:1

  Scenario: Run scan on a known site                # tests/features/steps/tests/features/site_scan.feature:2
    Given I have a target URL "https://example.com" # tests/features/steps/site_scan_steps.py:5
    When I run the scanner once                     # tests/features/steps/site_scan_steps.py:9
âš¡ Running one-off scan on https://example.com...
/Users/reginaldmoore/Desktop/demo-ready1/mojo_scrape/mcp_site_scanner.py:221: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  fetched_time = datetime.datetime.utcnow().isoformat() + "Z"
Running oneoff scan of - mcp_site_scanner.py:370 https://example.com
Summary: - mcp_site_scanner.py:372 {
  "total_links": 1,
  "broken_links": 0,
  "forms_detected": 0,
  "add_member_attempts": 5
}
Report written to - mcp_site_scanner.py:373 reports/report.html
âœ… Report created: reports/REPORT_10_15_25_1239.html
ðŸ•’ Duration: 4s
ðŸ“˜ Logs saved in: logs/scan_10_15_25_1239.log
    Then a report file should be created            # tests/features/steps/site_scan_steps.py:15
      ASSERT FAILED: Report file not found



Failing scenarios:
  tests/features/steps/tests/features/site_scan.feature:2  Run scan on a known site

0 features passed, 1 failed, 0 skipped
0 scenarios passed, 1 failed, 0 skipped
2 steps passed, 1 failed, 0 skipped
Took 0min 4.214s
============================= test session starts ==============================
platform darwin -- Python 3.13.5, pytest-8.4.2, pluggy-1.6.0
rootdir: /Users/reginaldmoore/Desktop/demo-ready1/mojo_scrape
plugins: mock-3.15.1, anyio-4.11.0, cov-7.0.0
collected 1 item

tests/unit/test_scanner.py âš¡ Running one-off scan on https://example.com...
/Users/reginaldmoore/Desktop/demo-ready1/mojo_scrape/mcp_site_scanner.py:221: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  fetched_time = datetime.datetime.utcnow().isoformat() + "Z"
Running oneoff scan of - mcp_site_scanner.py:370 https://example.com
Summary: - mcp_site_scanner.py:372 {
  "total_links": 1,
  "broken_links": 0,
  "forms_detected": 0,
  "add_member_attempts": 5
}
Report written to - mcp_site_scanner.py:373 reports/report.html
âœ… Report created: reports/REPORT_10_15_25_1239.html
ðŸ•’ Duration: 2s
ðŸ“˜ Logs saved in: logs/scan_10_15_25_1239.log
F                                             [100%]

=================================== FAILURES ===================================
____________________________ test_report_generated _____________________________

tmp_path = PosixPath('/private/var/folders/wd/1ywkxdcd0x3cn3t_yjlphbxh0000gn/T/pytest-of-reginaldmoore/pytest-4/test_report_generated0')

    def test_report_generated(tmp_path):
        """Ensure report.html is produced when scanner runs once."""
        cmd = ["bash", "run-scan.sh", "once", "https://example.com"]
        subprocess.run(cmd, check=False)
>       assert os.path.exists("reports/report.html"), "Expected report.html not found"
E       AssertionError: Expected report.html not found
E       assert False
E        +  where False = <function exists at 0x10228eb60>('reports/report.html')
E        +    where <function exists at 0x10228eb60> = <module 'posixpath' (frozen)>.exists
E        +      where <module 'posixpath' (frozen)> = os.path

tests/unit/test_scanner.py:8: AssertionError
----------------------------- Captured stdout call -----------------------------
âš¡ Running one-off scan on https://example.com...
/Users/reginaldmoore/Desktop/demo-ready1/mojo_scrape/mcp_site_scanner.py:221: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  fetched_time = datetime.datetime.utcnow().isoformat() + "Z"
Running oneoff scan of - mcp_site_scanner.py:370 https://example.com
Summary: - mcp_site_scanner.py:372 {
  "total_links": 1,
  "broken_links": 0,
  "forms_detected": 0,
  "add_member_attempts": 5
}
Report written to - mcp_site_scanner.py:373 reports/report.html
âœ… Report created: reports/REPORT_10_15_25_1239.html
ðŸ•’ Duration: 2s
ðŸ“˜ Logs saved in: logs/scan_10_15_25_1239.log
=========================== short test summary info ============================
FAILED tests/unit/test_scanner.py::test_report_generated - AssertionError: Ex...
============================== 1 failed in 2.65s ===============================
âœ… Report created: reports/REPORT_10_15_25_1239.html
ðŸ•’ Duration: 7s
ðŸ“˜ Logs saved in: logs/scan_10_15_25_1239.log
